---
description: 
globs: 
alwaysApply: true
---
---
description: Python é–‹ç™¼è¦ç¯„å’Œæœ€ä½³å¯¦è¸
globs: **/*.py
alwaysApply: true
---

# ğŸ Python é–‹ç™¼è¦ç¯„

## **ä»£ç¢¼é¢¨æ ¼**
- éµå¾ª PEP 8 ç·¨ç¢¼è¦ç¯„
- ä½¿ç”¨ 4 å€‹ç©ºæ ¼é€²è¡Œç¸®æ’
- è¡Œé•·åº¦é™åˆ¶ç‚º 88 å­—ç¬¦
- ä½¿ç”¨ Black æ ¼å¼åŒ–å·¥å…·

```python
# âœ… è‰¯å¥½çš„ä¾‹å­
def calculate_total_price(items: list[dict], tax_rate: float = 0.1) -> float:
    """è¨ˆç®—å•†å“ç¸½åƒ¹åŒ…å«ç¨…é‡‘."""
    subtotal = sum(item['price'] * item['quantity'] for item in items)
    return subtotal * (1 + tax_rate)

# âŒ é¿å…çš„ä¾‹å­
def calc(items,tax=0.1):
    total=0
    for i in items:
        total+=i['price']*i['qty']
    return total*(1+tax)
```

## **å‘½åæ…£ä¾‹**
- **è®Šé‡å’Œå‡½æ•¸**ï¼šä½¿ç”¨ `snake_case`
- **é¡åˆ¥**ï¼šä½¿ç”¨ `PascalCase`
- **å¸¸æ•¸**ï¼šä½¿ç”¨ `UPPER_SNAKE_CASE`
- **ç§æœ‰æˆå“¡**ï¼šä»¥å–®åº•ç·š `_` é–‹é ­

## **é¡å‹æç¤º**
- ç‚ºæ‰€æœ‰å‡½æ•¸åƒæ•¸å’Œè¿”å›å€¼æ·»åŠ é¡å‹æç¤º
- ä½¿ç”¨ç¾ä»£çš„é¡å‹èªæ³• (Python 3.9+)
- å°å…¥ `from __future__ import annotations` ä»¥æ”¯æ´æ–°èªæ³•

```python
from __future__ import annotations

def process_ad_data(ad_config: dict[str, Any]) -> AdResult:
    """è™•ç†å»£å‘Šé…ç½®æ•¸æ“š."""
    pass
```

## **éŒ¯èª¤è™•ç†**
- ä½¿ç”¨å…·é«”çš„ç•°å¸¸é¡å‹
- æä¾›æœ‰æ„ç¾©çš„éŒ¯èª¤è¨Šæ¯
- ä½¿ç”¨ `logging` æ¨¡çµ„è€Œé `print`

```python
import logging

logger = logging.getLogger(__name__)

def load_template(template_name: str) -> str:
    try:
        with open(f"templates/{template_name}", 'r', encoding='utf-8') as f:
            return f.read()
    except FileNotFoundError:
        logger.error(f"Template not found: {template_name}")
        raise TemplateNotFoundError(f"ç„¡æ³•æ‰¾åˆ°æ¨¡æ¿: {template_name}")
```

## **æ–‡æª”å­—ç¬¦ä¸²**
- ä½¿ç”¨ä¸‰é‡å¼•è™Ÿ `"""`
- ç°¡æ½”æè¿°å‡½æ•¸åŠŸèƒ½
- å¿…è¦æ™‚åŒ…å«åƒæ•¸å’Œè¿”å›å€¼èªªæ˜

## **å°å…¥è¦ç¯„**
- æ¨™æº–åº«å°å…¥åœ¨æœ€å‰
- ç¬¬ä¸‰æ–¹åº«å°å…¥åœ¨ä¸­é–“
- æœ¬åœ°æ¨¡çµ„å°å…¥åœ¨æœ€å¾Œ
- æ¯çµ„ä¹‹é–“ç©ºä¸€è¡Œ

```python
# æ¨™æº–åº«
import logging
from pathlib import Path

# ç¬¬ä¸‰æ–¹åº«
from flask import Flask, request
import jinja2

# æœ¬åœ°æ¨¡çµ„
from app.models import AdUnit
from app.services import TemplateService
