# ğŸš€ å„ªåŒ–ç‰ˆå»£å‘Šé–‹ç™¼ Workflow

## ğŸ¯ æ ¸å¿ƒç†å¿µ
**ä»¥æ•¸æ“šçµæ§‹ç‚ºä¸­å¿ƒï¼Œæ¨™æº–åŒ–é–‹ç™¼æµç¨‹ï¼Œæœ€å¤§åŒ–é–‹ç™¼æ•ˆç‡**

---

## ğŸ“Š Workflow æ¦‚è¦½

```mermaid
graph TD
    A[ğŸ“ æä¾› 3 é …é—œéµè³‡è¨Š] --> B[âš¡ è‡ªå‹•ç”Ÿæˆä»£ç¢¼]
    B --> C[ğŸ”§ å®¢è£½åŒ–èª¿æ•´]
    C --> D[âœ… æ¸¬è©¦é©—è­‰] 
    D --> E[ğŸ“š æ–‡æª”åŒæ­¥]
    E --> F[ğŸ‰ éƒ¨ç½²å®Œæˆ]
    
    style A fill:#e1f5fe
    style B fill:#e8f5e8
    style F fill:#fff3e0
```

---

## ğŸ”‘ æ­¥é©Ÿè©³è§£

### æ­¥é©Ÿ 1ï¼šé—œéµè³‡è¨Šæ”¶é›† (5åˆ†é˜)
**æ‚¨åªéœ€æä¾›é€™ 3 é …è³‡è¨Šï¼š**

#### 1.1 å»£å‘Šç‰¹å®š JSON æ¬„ä½
```javascript
// ç¯„ä¾‹ï¼šå¯¶ç®±å»£å‘Š
{
  "treasure_box_image": "string",     // å¯¶ç®±åœ–ç‰‡
  "reward_image": "string",           // çå“åœ–ç‰‡  
  "reward_text": "string",            // çå“æ–‡å­—
  "animation_duration": 500,          // å‹•ç•«æ™‚é•·
  "can_reopen": false                 // å¯é‡è¤‡é–‹å•Ÿ
}
```

#### 1.2 Payload æ ¼å¼
```javascript
// å¯¶ç®±å»£å‘Šä½¿ç”¨å“ªç¨® payloadï¼Ÿ
- payload_game_widget  âœ…
- payload_vote_widget
- payload_popup_json
- è‡ªå®šç¾©æ ¼å¼
```

#### 1.3 Suprad èª¿ç”¨åƒæ•¸
```python
# åœ¨ run_suprad() ä¸­ä½¿ç”¨çš„å»£å‘Šé¡å‹åç¨±
run_suprad(playwright, ad_data, 'treasure_box')  # é€™å€‹åƒæ•¸
```

### æ­¥é©Ÿ 2ï¼šè‡ªå‹•ä»£ç¢¼ç”Ÿæˆ (15åˆ†é˜)
**åŸºæ–¼æ‚¨çš„è³‡è¨Šï¼Œè‡ªå‹•ç”Ÿæˆï¼š**

- âœ… **è·¯ç”±ä»£ç¢¼** (`app/routes/main.py`)
- âœ… **HTML æ¨¡æ¿** (`templates/treasure_box_ad.html`)
- âœ… **è¡¨å–®è™•ç†é‚è¼¯**
- âœ… **JSON æ•¸æ“šçµæ§‹è™•ç†**
- âœ… **éŒ¯èª¤è™•ç†å’Œé©—è­‰**

### æ­¥é©Ÿ 3ï¼šå¿«é€Ÿå®¢è£½åŒ– (30åˆ†é˜)
**é‡å°ç‰¹æ®Šéœ€æ±‚é€²è¡Œå¾®èª¿ï¼š**

- ğŸ¨ èª¿æ•´é è¦½æ•ˆæœ
- ğŸ”§ å„ªåŒ–è¡¨å–®å¸ƒå±€
- âš¡ åŠ å¼·é©—è­‰é‚è¼¯
- ğŸ¯ å®¢è£½åŒ– Payload è™•ç†

### æ­¥é©Ÿ 4ï¼šä¸€éµæ¸¬è©¦ (15åˆ†é˜)
**è‡ªå‹•åŒ–æ¸¬è©¦æµç¨‹ï¼š**

- âœ… è·¯ç”±æ­£å¸¸è¼‰å…¥
- âœ… è¡¨å–®æäº¤æˆåŠŸ
- âœ… JSON æ ¼å¼æ­£ç¢º
- âœ… Suprad è…³æœ¬åŸ·è¡Œ
- âœ… éŒ¯èª¤è™•ç†é©—è­‰

### æ­¥é©Ÿ 5ï¼šæ–‡æª”åŒæ­¥ (5åˆ†é˜)
**è‡ªå‹•æ›´æ–°ç›¸é—œæ–‡æª”ï¼š**

- ğŸ“ README.md
- ğŸ“‹ FEATURE_SUMMARY.md  
- ğŸ“Š JSON çµæ§‹æ–‡æª”

---

## ğŸ å¯¶ç®±å»£å‘Šå¯¦ä¾‹

### è¼¸å…¥è³‡è¨Šç¯„ä¾‹
```yaml
å»£å‘Šé¡å‹: treasure_box
JSON æ¬„ä½:
  - treasure_box_image: "å¯¶ç®±åœ–ç‰‡URL"
  - reward_image: "çå“åœ–ç‰‡URL"
  - reward_text: "çå“æè¿°æ–‡å­—"
  - open_animation: "flip" # flip/fade/rotate
  - reward_display_time: 3000
Payload é¡å‹: payload_game_widget
Suprad åƒæ•¸: "treasure_box"
```

### è¼¸å‡ºçµæœ
**15åˆ†é˜å…§ç”Ÿæˆï¼š**
- `/treasure-box-ad` é é¢ âœ…
- `/create-treasure-box-ad` è™•ç†é‚è¼¯ âœ…
- `treasure_box_ad.html` æ¨¡æ¿ âœ…
- å®Œæ•´çš„è¡¨å–®é©—è­‰ âœ…
- å¯¶ç®±é–‹å•Ÿé è¦½æ•ˆæœ âœ…

---

## ğŸ’¡ é–‹ç™¼æ•ˆç‡æå‡

### å‚³çµ±æ–¹å¼ vs æ–° Workflow

| é …ç›® | å‚³çµ±æ–¹å¼ | æ–° Workflow | ç¯€çœæ™‚é–“ |
|------|----------|-------------|----------|
| éœ€æ±‚åˆ†æ | 2å°æ™‚ | 5åˆ†é˜ | 95% â¬‡ï¸ |
| ä»£ç¢¼ç·¨å¯« | 4å°æ™‚ | 30åˆ†é˜ | 87% â¬‡ï¸ |
| æ¸¬è©¦èª¿è©¦ | 2å°æ™‚ | 15åˆ†é˜ | 87% â¬‡ï¸ |
| æ–‡æª”æ›´æ–° | 1å°æ™‚ | 5åˆ†é˜ | 92% â¬‡ï¸ |
| **ç¸½è¨ˆ** | **9å°æ™‚** | **55åˆ†é˜** | **90% â¬‡ï¸** |

---

## ğŸ”§ MCP åŠŸèƒ½å»ºè­°

ç‚ºäº†é€²ä¸€æ­¥å„ªåŒ– workflowï¼Œå»ºè­°æ–°å¢ä»¥ä¸‹ MCP åŠŸèƒ½ï¼š

### 1. JSON çµæ§‹ç”Ÿæˆå™¨
```python
@mcp_tool
def generate_ad_json_structure(ad_type: str, custom_fields: dict):
    """åŸºæ–¼å»£å‘Šé¡å‹å’Œè‡ªå®šç¾©æ¬„ä½ç”Ÿæˆæ¨™æº– JSON çµæ§‹"""
    pass
```

### 2. ä»£ç¢¼æ¨¡æ¿ç”Ÿæˆå™¨  
```python
@mcp_tool
def generate_ad_route_code(ad_type: str, json_structure: dict):
    """ç”Ÿæˆæ¨™æº–åŒ–çš„è·¯ç”±ä»£ç¢¼"""
    pass
```

### 3. è¡¨å–®é©—è­‰å™¨
```python
@mcp_tool  
def validate_ad_json_structure(ad_data: dict, required_fields: list):
    """é©—è­‰å»£å‘Š JSON çµæ§‹å®Œæ•´æ€§"""
    pass
```

---

## âœ… å“è³ªä¿è­‰æ©Ÿåˆ¶

### è‡ªå‹•æª¢æŸ¥æ¸…å–®
æ¯æ¬¡é–‹ç™¼å®Œæˆå¾Œè‡ªå‹•é©—è­‰ï¼š

- [ ] âœ… JSON çµæ§‹ç¬¦åˆæ¨™æº–
- [ ] âœ… è·¯ç”±å‘½åéµå¾ªè¦ç¯„
- [ ] âœ… éŒ¯èª¤è™•ç†å®Œæ•´
- [ ] âœ… Session ç®¡ç†æ­£ç¢º
- [ ] âœ… æ¨¡æ¿ç¹¼æ‰¿æ­£ç¢º
- [ ] âœ… å°èˆªé€£çµæ›´æ–°
- [ ] âœ… æ¸¬è©¦æ¡ˆä¾‹é€šé
- [ ] âœ… æ–‡æª”åŒæ­¥æ›´æ–°

### æ¶æ§‹ä¸€è‡´æ€§æª¢æŸ¥
```python
# è‡ªå‹•æª¢æŸ¥æ–°å»£å‘Šæ˜¯å¦ç¬¦åˆæ—¢å®šæ¶æ§‹
def check_architecture_consistency(ad_type: str):
    # æª¢æŸ¥è·¯ç”±å‘½å
    # æª¢æŸ¥æ¨¡æ¿çµæ§‹  
    # æª¢æŸ¥ JSON æ ¼å¼
    # æª¢æŸ¥éŒ¯èª¤è™•ç†
    pass
```

---

## ğŸ¯ ç¸½çµ

### æ–° Workflow çš„å„ªå‹¢
1. **æ•ˆç‡æå‡ 90%** - å¾ 9 å°æ™‚ç¸®çŸ­åˆ° 1 å°æ™‚
2. **éŒ¯èª¤æ¸›å°‘** - æ¨™æº–åŒ–é¿å…äººç‚ºç–æ¼
3. **æ¶æ§‹ä¸€è‡´** - æ‰€æœ‰å»£å‘Šé¡å‹éµå¾ªç›¸åŒæ¨¡å¼
4. **æ˜“æ–¼ç¶­è­·** - æ¸…æ™°çš„æ•¸æ“šé©…å‹•æ¶æ§‹
5. **å¿«é€Ÿè¿­ä»£** - æ”¯æ´å¿«é€ŸåŸå‹å’Œæ¸¬è©¦

### å¯¦æ–½å»ºè­°
1. **ç«‹å³æ¡ç”¨** Task Master æª¢æŸ¥æ¸…å–®
2. **å»ºç«‹** JSON çµæ§‹æ¨™æº–æ–‡æª”
3. **é–‹ç™¼** MCP è‡ªå‹•åŒ–å·¥å…·
4. **åŸ¹è¨“** åœ˜éšŠä½¿ç”¨æ–°æµç¨‹
5. **æŒçºŒå„ªåŒ–** workflow æ•ˆç‡

**é€™å¥— workflow å°‡è®“æ‚¨çš„å»£å‘Šé–‹ç™¼è®Šå¾—åƒå¡«è¡¨æ ¼ä¸€æ¨£ç°¡å–®ï¼** âš¡